{% extends 'python/pyproject.toml.jinja' %}

{% block dependencies %}
    {{ super() }}
    "python-slugify>=8.0.1",
    "Pillow==10.1.0",
    "rcssmin",
    "argon2-cffi",
    "psycopg[binary]",
    "backoff",
    "requests",
    "django>=5.0.0",
    "django-model-utils",
    "django-allauth",
    "django-crispy-forms",
    "crispy-bootstrap5",
    "django-health-check",
    "django-probes",
    "django-postgres-extra",
    "django-solo",
    "django-appconf>=1.0.6",
    "django-cors-headers>=4.3.1",
    "django-filter>=24.1",
    "slippers",
    "django-tables2>=2.7.0",
    "django-autocomplete-light>=3.11.0",

    {%- if rest %}"dj-rest-auth",
    "django-rest-framework",
    "drf-spectacular",
    "djangorestframework-simplejwt",
    "django-cors-headers",{% endif %}
    {%- if ldap %}"django-auth-ldap",{% endif %}
{% endblock %}

{% block project_extra %}

[project.optional-dependencies]
prod = [
    "gunicorn",
    "sentry-sdk>=1.40.5",
]

dev = [
    "Werkzeug[watchdog]",
    "ipdb",
    "pytest",
    "pytest-sugar",
    "coverage",
    "pre-commit",
    "factory-boy",
    "django-debug-toolbar",
    "django-extensions",
    "django-coverage-plugin",
    "pytest-django",
    "django-models2puml>=0.2",
]
{% endblock %}

{% block project_scripts %}
"manage.py" = "{{ project_slug }}:django_manage"
{% endblock %}

{% block ruff_extra %}
[tool.ruff.lint.per-file-ignores]
"src/**/migrations/*.py" = ["E501", "ANN"]
{% endblock %}

{% block extra %}
# ==== pytest ====
[tool.pytest.ini_options]
minversion = "6.0"
addopts = "--ds=config.settings.test --reuse-db"
python_files = [
    "tests.py",
    "test_*.py",
]

# ==== Coverage ====
[tool.coverage.run]
include = ["app/**"]
omit = ["*/migrations/*", "*/tests/*"]
plugins = ["django_coverage_plugin"]
{% endblock %}
